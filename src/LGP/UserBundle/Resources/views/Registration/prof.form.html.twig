{% extends "FOSUserBundle::layout.html.twig" %}

{% block title %}
    Création de compte prof - {{ parent() }}
{% endblock %}

{% block fos_user_content %}
    {% trans_default_domain 'FOSUserBundle' %}
    <!-- start hero-header with windows height -->
    <div class="hero" style="background-image:url('{{ asset('images/hero-header/01.1.jpg') }}'); margin-top:-80px;">

        <div class="container">

            <div class="row">

                <div class="col-sm-5 col-sm-offset-1 col-md-4">
                    <div class="left">
                        <h3 class="hero-title-register">Devenez un grand prof<br></h3><h4
                            class="hero-subtitle-register">Et faites
                            grandir vos élèves.</h4>
                        <p class="lead-register">
                            Tout le monde a quelque chose à partager ou à enseigner.
                            Chez Legrandprof vous pouvez donner des cours particuliers dans des tonnes de matières
                            (langues, sports,
                            musique, arts, loisirs, soutien scolaire).</p>
                    </div>

                </div>
                <div class="col-sm-3 col-md-offset-1 col-sm-offset-1 col-md-6">
                    <div class="panel">
                        <div class="panel-body">
                            <form action="{{ path('lgp_prof_registration') }}" method="POST" class="form-horizontal">
                                {{ form_errors(form) }}

                                <div class="panel panel-default register-panel" id="info_perso">
                                    <div class="panel-heading">Informations personnelles</div>
                                    <div class="panel-body  register-panel">
                                        <div class="form-group">
                                            <div class="col-md-6 col-md-offset-3">
                                                {{ form_widget(form.nom, {'attr': {'placeholder':'Nom','class':'form-control'}}) }}
                                                {{ form_errors(form.nom) }}
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="col-md-6 col-md-offset-3">
                                                {{ form_widget(form.prenoms, {'attr': {'placeholder':'Prénoms','class':'form-control'}}) }}
                                                {{ form_errors(form.prenoms) }}
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="col-md-6 col-md-offset-3">
                                                {{ form_widget(form.sexe, {'attr': {'class':'form-control'}}) }}
                                                {{ form_errors(form.sexe) }}
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="col-md-6 col-md-offset-3">
                                                {{ form_widget(form.pays, {'attr': {'class':'form-control'}}) }}
                                                {{ form_errors(form.pays) }}
                                            </div>
                                        </div>

                                        <div class="form-group">
                                           <div class="col-md-6 col-md-offset-3">
                                               {{ form_widget(form.ville, {'attr': {'placeholder': 'Ville de résidence', 'class':'form-control'}}) }}
                                               {{ form_errors(form.ville) }}
                                           </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="col-md-6 col-md-offset-3">
                                                {{ form_widget(form.email, {'attr': {'placeholder':'Adresse email','class':'form-control'}}) }}
                                                {{ form_errors(form.email) }}
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-md-6 col-md-offset-3">
                                                {{ form_widget(form.telephone, {'attr': {'class': 'form-control', 'placeholder': 'Téléphone'}}) }}
                                                {{ form_errors(form.telephone) }}
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-md-6 col-md-offset-3">
                                                {{ form_widget(form.plainPassword.children['first'], {'attr': {'placeholder':'Mot de passe','class':'form-control'}}) }}
                                                {{ form_errors(form.plainPassword.first) }}
                                            </div>
                                        </div>

                                        <div class="form-group">
                                             <div class="col-md-6 col-md-offset-3">
                                                {{ form_widget(form.plainPassword.children['second'], {'attr': {'placeholder':'Confirmation Mot de passe','class':'form-control'}}) }}
                                                {{ form_errors(form.plainPassword.second) }}
                                            </div>
                                        </div>

                                    </div>
                                    
                                    <div class="panel-footer">
                                        <a href="#" class="btn btn-primary" id="next_info_perso">Suivant</a>
                                    </div>      
                                </div>
                                <div class="panel panel-default register-panel" id="cours_dispenser">
                                    <div class="panel-heading">
                                        Quels cours pouvez-vous dispenser ?
                                        <button class="btn btn-primary btn-sm" id="add_cours"><i class="fa fa-plus"></i>
                                        Ajouter</button>
                                    </div>
                                    <div class="panel-body  register-panel">
                                        <div class="form-group">
                                            <div class="col-md-6 col-md-offset-3">
                                                {{ form_widget(form.enseignements) }}
                                                {{ form_errors(form.enseignements) }}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel-footer">
                                        <a href="#" class="btn btn-primary" id="last_cours_dispenser">Précédent</a>
                                        <a href="#" class="btn btn-primary" id="next_cours_dispenser">Suivant</a>
                                    </div>  
                                </div>
                                            
                                <div class="panel panel-default" id="presentation">
                                    <div class="panel-heading">
                                        Qui êtes vous ?
                                    </div>
                                    <div class="panel-body  register-panel">
                                        <div class="form-group">
                                            <div class="col-md-8 col-md-offset-2">
                                                {{ form_label(form.presentation, "Présentez vous en quelques mots",{'attr': {'style': 'color:rgb(100,100,100)'}}) }}
                                                {{ form_widget(form.presentation, {'attr': {'class': 'form-control', 'style':'height:250px','placeholder':'Présentez vous en quelques mots'}}) }}
                                                {{ form_errors(form.presentation) }}
                                            </div>
                                        </div>

                                    </div>
                                    <div class="panel-footer">
                                        <a href="#" class="btn btn-primary" id="last_presentation">Précédent</a>
                                        <a href="#" class="btn btn-primary" id="next_presentation">Précédent</a>
                                    </div>  
                                </div>
                                <div class="panel panel-default" id="quartiers_cours">
                                    <div class="panel-heading">
                                        Dans quels quartiers pouvez-vous dispenser ces cours ?
                                    </div>
                                    <div class="panel-body  register-panel">
                                        <div class="form-group">
                                            {{ form_label(form.quartierCibles, "Sélectionnez tous les quartiers dans lequels vous pouvez dispenser des cours (CTRL + clic sur le quartier pour une sélection multiple)",{'attr': {'class': 'quartiers'}}) }}
                                            {{ form_widget(form.quartierCibles, {'attr': {'style': 'height: 400px; width: 200px'}}) }}
                                            {{ form_errors(form.quartierCibles) }}
                                        </div>
                                        
                                        <div class="form-group">
                                            {{ form_label(form.presentation, "Présentez vous en quelques mots") }}
                                            {{ form_widget(form.presentation, {'attr': {'class': 'form-control'}}) }}
                                            {{ form_errors(form.presentation) }}
                                        </div>

                                    </div>
                                    <div class="panel-footer">
                                        <a href="#" class="btn btn-primary" id="last_quartiers_cours">Précédent</a>
                                    </div>  
                                </div>

                                {{ form_rest(form) }}
                                <div>
                                    <input id="button_save" type="submit" value="{{ 'Enregistrez'|trans }}" class="btn btn-primary save"/>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>

    </div>
    <!-- end hero-header with windows height -->

    <div class="post-hero bg-light" style="margin-top:60px;margin-bottom:60px;">
        <div class="container">
            <div class="row">
                <div class="col-sm-4">
                    <div class="featured-count clearfix">
                        <div class="icon"><i class="pe-7s-world"></i></div>
                        <div class="content">
                            <h6>Enseignez à un plus grand nombre</h6>
                            <span>Selon votre expérience et votre disponibilité, partagez vos connaissances avec un grand nombre !</span>
                        </div>
                    </div>
                </div>

                <div class="col-sm-4">
                    <div class="featured-count clearfix">
                        <div class="icon"><i class="pe-7s-map-marker"></i></div>
                        <div class="content">
                            <h6>Près de chez vous</h6>
                            <span>Vous ne recevrez que des demandes de personnes près de chez vous.</span>
                        </div>
                    </div>
                </div>

                <div class="col-sm-4">
                    <div class="featured-count clearfix">
                        <div class="icon"><i class="pe-7s-cash"></i></div>
                        <div class="content">
                            <h6>En fixant votre prix</h6>
                            <span> Fixez vos prix pour chaque matière et pack de matières !</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock fos_user_content %}

{% block javascripts %}
    {{ parent() }}

    <script>
        $(function () {
            $(".quartiers").css("color","black");
            $(".register-panel").css("height","480px");
            $("#cours_dispenser").hide();
            $("#quartiers_cours").hide();
            $("#presentation").hide();
            $(".save").hide();

            $("#next_info_perso").click(function(){
               $("#info_perso").hide();
               $("#cours_dispenser").show();
            });
            $("#last_cours_dispenser").click(function(){
               $("#cours_dispenser").hide();
               $("#info_perso").show();
            });
            $("#next_cours_dispenser").click(function(){
               $("#cours_dispenser").hide();
               $("#presentation").show();
            });
            $("#last_presentation").click(function(){
               $("#presentation").hide();
               $("#cours_dispenser").show();
            });
            $("#next_presentation").click(function(){
               $("#presentation").hide();
               $("#quartiers_cours").show();
               $(".save").show();
            });
            $("#last_quartiers_cours").click(function(){
               $("#quartiers_cours").hide();
               $(".save").hide();
               $("#cours_dispenser").show();
               
            });
            /**
             *  Gestion de l'ajout des ExperiencePro
             *
             * @type $
             */

            // On recupere la balise <div> qui contient l'attribut <<data-prototype>> qui nous interesse
            var $container = $('div#fos_user_registration_form_enseignements');

            // ON definit un compteur unique pour nommer les champs qon va ajouter dynamiquement
            var index = $container.find(':input').length;

            addCours($container);

            // On ajoute un nouveau champ a chaque clic sur le lien d'ajout
            $('#add_cours').click(function (e) {
                addCours($container);
                e.preventDefault();
                return false;
            });


            // Fonction qui ajoute un formulaire de EnseignementType
            function addCours($container) {
                // Dans le contenu de l'attribut « data-prototype », on remplace :
                // - le texte "__name__label__" qu'il contient par le label du champ
                // - le texte "__name__" qu'il contient par le numéro du champ
                var template = $container.attr('data-prototype')
                    .replace(/__name__label__/g, 'Cours ' + (index + 1))
                    .replace(/__name__/g, index);

                // On cree un objet jquery qui contient ce template
                var $prototype = $(template);

                // On ajoute au prototype un lien pour pourvoir supprimer l'experience
                addDeleteLink($prototype);

                // On ajoute le prototype a la fin de la balise <div>
                $container.append($prototype);

                // On incremente le compteur
                index++;
            }


            /**
             *  Gestion de l'ajout des Quartiers Cibles
             *
             * @type $
             */

            // On recupere la balise <div> qui contient l'attribut <<data-prototype>> qui nous interesse
            var $container2 = $('div#fos_user_registration_form_quartierCibles');

            // ON definit un compteur unique pour nommer les champs qon va ajouter dynamiquement
            var index2 = $container2.find(':input').length;

            addQuartier($container2);

            $('#add_quartier').click(function (e) {
                addQuartier($container2);
                e.preventDefault();
                return false;
            });


            function addQuartier($container) {
                // Dans le contenu de l'attribut « data-prototype », on remplace :
                // - le texte "__name__label__" qu'il contient par le label du champ
                // - le texte "__name__" qu'il contient par le numéro du champ
                var template = $container.attr('data-prototype')
                    .replace(/__name__label__/g, 'Quartier ' + (index2 + 1))
                    .replace(/__name__/g, index2);

                // On cree un objet jquery qui contient ce template
                var $prototype = $(template);

                // On ajoute au prototype un lien pour pourvoir supprimer l'experience
                addDeleteLink($prototype);

                $container.append($prototype);
                index2++;
            }


            // La fonction qui ajoute un lien de suppression d'une catégorie
            function addDeleteLink($prototype) {
                var $deleteLink = $('<a href="#" class="btn btn-danger btn-sm">Supprimer</a>');

                $prototype.append($deleteLink);

                $deleteLink.click(function (e) {
                    if (confirm('Etes vous certain de vouloir supprimer cette entrée ?')) {
                        $prototype.remove();
                        e.preventDefault(); // évite qu'un # apparaisse dans l'URL
                    }

                    return false;
                });
            }


        });
    </script>
{% endblock javascripts %}
